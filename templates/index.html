<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Explore Albania’s premier properties with a seamless, world-class experience." />
  <meta name="keywords" content="real estate, Albania, luxury homes, villas, apartments, buy, rent" />
  <meta name="author" content="Albania Properties" />
  <title>Albania Properties | Your Gateway to Exceptional Homes</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet" />
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet" />
  <!-- AOS Animation Library -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
  <!-- Leaflet for Map -->
  <link href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" rel="stylesheet" />
  <!-- Custom CSS -->
  <style>
    :root {
      --primary-color: #1a73e8;
      --secondary-color: #2d3748;
      --accent-color: #00c4b4;
      --background-light: #f9fafb;
      --background-dark: #1f2a44;
      --text-dark: #1f2a44;
      --text-light: #fff;
      --shadow-sm: 0 2px 10px rgba(0, 0, 0, 0.08);
      --shadow-md: 0 6px 25px rgba(0, 0, 0, 0.12);
      --transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: var(--background-light);
      color: var(--text-dark);
      line-height: 1.6;
      overflow-x: hidden;
    }

    h1, h2, h3 {
      font-weight: 700;
    }

    a {
      text-decoration: none;
      color: inherit;
      transition: var(--transition);
    }

    /* Header */
    header {
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 1000;
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(12px);
      padding: 20px 0;
      box-shadow: var(--shadow-sm);
      transition: padding 0.3s ease, background 0.3s ease;
    }

    header.scrolled {
      padding: 10px 0;
      background: rgba(255, 255, 255, 1);
    }

    .navbar-brand {
      font-size: 1.8rem;
      color: var(--text-dark);
      display: flex;
      align-items: center;
      font-weight: 600;
    }

    .navbar-brand i {
      margin-right: 12px;
      color: var(--primary-color);
      font-size: 1.4rem;
    }

    .navbar-nav .nav-link {
      color: var(--text-dark);
      font-size: 1.1rem;
      font-weight: 400;
      margin-left: 30px;
      position: relative;
      padding-bottom: 6px;
    }

    .navbar-nav .nav-link:hover,
    .navbar-nav .nav-link.active {
      color: var(--primary-color);
    }

    .navbar-nav .nav-link::after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      background: var(--primary-color);
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      transition: width 0.3s ease;
    }

    .navbar-nav .nav-link:hover::after,
    .navbar-nav .nav-link.active::after {
      width: 80%;
    }

    /* Remove the default dropdown arrow on the language dropdown */
    #languageDropdown::after {
      display: none !important;
    }

    /* Hero Section */
    .hero-section {
      height: 80vh;
      background: url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80') center/cover no-repeat;
      position: relative;
      display: flex;
      align-items: center;
      color: var(--text-light);
    }

    .hero-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to bottom, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.65));
      z-index: 1;
    }

    .hero-content {
      position: relative;
      z-index: 2;
      padding-top: 120px; /* Account for fixed header */
    }

    .search-card {
      background: rgba(255, 255, 255, 0.98);
      border-radius: 16px;
      box-shadow: var(--shadow-md);
    }

    .search-card .nav-pills .nav-link {
      color: var(--text-dark);
      padding: 10px 20px;
      font-weight: 600;
    }

    .search-card .nav-pills .nav-link.active {
      background: var(--primary-color);
      color: var(--text-light);
    }

    .search-card .btn {
      background: var(--primary-color);
      color: var(--text-light);
      border-radius: 8px;
      font-weight: 600;
      transition: var(--transition);
    }

    .search-card .btn:hover {
      background: #1557b0;
    }

    /* Featured Listings */
    .featured-listings {
      padding: 80px 0;
    }

    .section-title {
      font-size: 2.5rem;
      color: var(--text-dark);
      position: relative;
    }

    .section-title::after {
      content: '';
      width: 60px;
      height: 4px;
      background: var(--accent-color);
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
    }

    .property-card {
      border: none;
      border-radius: 16px;
      overflow: hidden;
      background: #fff;
      box-shadow: var(--shadow-sm);
      transition: var(--transition);
      position: relative;
    }

    .property-card:hover {
      transform: translateY(-10px);
      box-shadow: var(--shadow-md);
    }

    .property-card img {
      height: 220px;
      object-fit: cover;
      transition: transform 0.6s ease;
    }

    .property-card:hover img {
      transform: scale(1.05);
    }

    .property-card .card-body {
      padding: 20px;
    }

    .property-card .badge {
      position: absolute;
      top: 15px;
      left: 15px;
      font-size: 0.9rem;
      padding: 6px 12px;
      border-radius: 20px;
    }

    .property-card h5 {
      font-size: 1.4rem;
      color: var(--text-dark);
      margin-bottom: 8px;
    }

    .property-card .price {
      font-size: 1.3rem;
      color: var(--primary-color);
      font-weight: 600;
    }

    .property-card .details {
      font-size: 0.95rem;
      color: #718096;
      margin-bottom: 12px;
    }

    .property-card .btn {
      background: var(--primary-color);
      border: none;
      border-radius: 8px;
      padding: 10px 25px;
      color: var(--text-light);
      font-weight: 600;
      transition: var(--transition);
    }

    .property-card .btn:hover {
      background: #1557b0;
      transform: scale(1.05);
    }

    .property-card .fa-heart {
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 1.3rem;
      color: #e2e8f0;
      cursor: pointer;
      transition: var(--transition);
    }

    .property-card .fa-heart:hover,
    .property-card .fa-heart.active {
      color: #ff4757;
    }

    .carousel-control-prev,
    .carousel-control-next {
      width: 5%;
      opacity: 0.8;
    }

    .carousel-control-prev-icon,
    .carousel-control-next-icon {
      background-color: var(--primary-color);
      border-radius: 50%;
      padding: 20px;
    }

    /* Map + Listings Section */
    .map-listings-section {
      padding: 80px 0;
      background: #f1f5f9;
    }

    #map {
      height: 400px;
      border-radius: 12px;
      box-shadow: var(--shadow-sm);
    }

    .property-list .property-item {
      transition: var(--transition);
      background: #fff;
      border-radius: 10px;
    }

    .property-list .property-item:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-md);
    }

    .property-item .btn {
      background: var(--primary-color);
      color: var(--text-light);
      padding: 8px 20px;
      font-size: 0.95rem;
      border-radius: 8px;
    }

    .property-item .price {
      font-size: 1.1rem;
      color: var(--primary-color);
      font-weight: 600;
    }

    /* CTA Section */
    .cta-section {
      padding: 80px 0;
      background: var(--background-light);
      text-align: center;
    }

    .cta-section .btn-alerts {
      background: var(--accent-color);
      color: var(--text-light);
      padding: 15px 40px;
      border-radius: 8px;
      font-weight: 600;
      font-size: 1.2rem;
      transition: var(--transition);
    }

    .cta-section .btn-alerts:hover {
      background: #00a89d;
      transform: scale(1.05);
      box-shadow: 0 6px 20px rgba(0, 196, 180, 0.3);
    }

    /* Footer */
    .footer {
      background: var(--background-dark);
      color: var(--text-light);
      padding: 80px 0 30px;
      font-size: 1rem;
    }

    .footer a {
      color: #a0aec0;
      margin: 0 20px;
      transition: var(--transition);
    }

    .footer a:hover {
      color: var(--primary-color);
    }

    .social-icons a {
      font-size: 1.5rem;
      margin: 0 15px;
      color: #a0aec0;
    }

    .social-icons a:hover {
      color: var(--accent-color);
    }

    /* Animations */
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    [data-aos="fade-up"] {
      animation: fadeInUp 0.8s ease-out forwards;
    }

    /* Typeahead Suggestion Styles */
    .tt-menu {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
      border: 1px solid #e2e8f0;
      max-height: 300px;
      overflow-y: auto;
      z-index: 1000;
      margin-top: 5px;
    }

    .tt-suggestion {
      padding: 10px 20px;
      font-size: 1rem;
      color: var(--text-dark);
      cursor: pointer;
      transition: background 0.2s ease;
    }

    .tt-suggestion:hover,
    .tt-suggestion.tt-cursor {
      background: #f1f5f9;
    }

    .tt-highlight {
      color: var(--primary-color);
      font-weight: 600;
    }

    .tt-empty {
      padding: 10px 20px;
      font-size: 1rem;
      color: #718096;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <nav class="navbar navbar-expand-lg">
      <div class="container">
        <a class="navbar-brand" href="/"><i class="fas fa-home"></i> Albania Properties</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item"><a class="nav-link" href="/properties?purpose=buy">Buy</a></li>
            <li class="nav-item"><a class="nav-link" href="/properties?purpose=rent">Rent</a></li>
            <li class="nav-item"><a class="nav-link" href="/sell">Sell</a></li>
            <li class="nav-item"><a class="nav-link" href="/agents">Find an Agent</a></li>
            <li class="nav-item" id="auth-link">
              <a class="nav-link" href="/signin"><i class="fas fa-user"></i> Sign In</a>
            </li>
            <!-- Language dropdown with a globe icon -->
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="languageDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fas fa-globe"></i>
              </a>
              <ul class="dropdown-menu" aria-labelledby="languageDropdown">
                <li><a class="dropdown-item" href="/?lang=al">🇦🇱 Albanian</a></li>
                <li><a class="dropdown-item" href="/?lang=en">🇬🇧 English</a></li>
                <li><a class="dropdown-item" href="/?lang=it">🇮🇹 Italian</a></li>
                <li><a class="dropdown-item" href="/?lang=de">🇩🇪 German</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </header>

  <!-- Hero Section: Interactive Property Search -->
  <section class="hero-section" id="home">
    <div class="hero-overlay"></div>
    <div class="hero-content container">
      <div class="row align-items-center">
        <div class="col-lg-6 text-start text-light">
          <h1 class="display-4 mb-4">Find Your Dream Home in Albania</h1>
          <p class="lead mb-5">Explore thousands of properties—buy, rent, or invest today.</p>
        </div>
        <div class="col-lg-6">
          <div class="search-card bg-white p-4 rounded-3 shadow-lg" data-aos="fade-up">
            <ul class="nav nav-pills mb-4" id="searchTab" role="tablist">
              <li class="nav-item" role="presentation">
                <button class="nav-link active" id="buy-tab" data-bs-toggle="pill" data-bs-target="#buy" type="button">Buy</button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="rent-tab" data-bs-toggle="pill" data-bs-target="#rent" type="button">Rent</button>
              </li>
            </ul>
            <div class="tab-content" id="searchTabContent">
              <div class="tab-pane fade show active" id="buy" role="tabpanel">
                <form id="search-buy" class="row g-3">
                  <div class="col-md-6">
                    <input type="text" class="form-control" id="location-buy" placeholder="City, Region, ZIP" required />
                  </div>
                  <div class="col-md-6">
                    <select class="form-select" name="property-type-buy">
                      <option value="">Property Type</option>
                      <option value="house">House</option>
                      <option value="apartment">Apartment</option>
                      <option value="villa">Villa</option>
                    </select>
                  </div>
                  <div class="col-md-6">
                    <input type="number" class="form-control" placeholder="Max Price (€)" name="max-price-buy" />
                  </div>
                  <div class="col-md-6">
                    <button type="submit" class="btn w-100">Search Properties</button>
                  </div>
                </form>
              </div>
              <div class="tab-pane fade" id="rent" role="tabpanel">
                <form id="search-rent" class="row g-3">
                  <div class="col-md-6">
                    <input type="text" class="form-control" id="location-rent" placeholder="City, Region, ZIP" required />
                  </div>
                  <div class="col-md-6">
                    <select class="form-select" name="property-type-rent">
                      <option value="">Property Type</option>
                      <option value="house">House</option>
                      <option value="apartment">Apartment</option>
                      <option value="villa">Villa</option>
                    </select>
                  </div>
                  <div class="col-md-6">
                    <input type="number" class="form-control" placeholder="Max Rent (€/mo)" name="max-rent" />
                  </div>
                  <div class="col-md-6">
                    <button type="submit" class="btn w-100">Search Rentals</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Listings: Carousel Style -->
  <section class="featured-listings" data-aos="fade-up" data-aos-delay="200">
    <div class="container">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="section-title mb-0">Explore Top Properties</h2>
        <a href="/properties" class="btn btn-outline-primary">View All Listings</a>
      </div>
      <div id="propertyCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <div class="row g-4">
              <div class="col-md-4">
                <div class="property-card">
                  <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Tirana Penthouse" />
                  <div class="card-body">
                    <span class="badge bg-success">New</span>
                    <h5>Tirana Skyline Penthouse</h5>
                    <p class="price">€450,000</p>
                    <p class="details">3 Beds • 2 Baths • 1500 sqft</p>
                    <a href="/property/tirana-penthouse" class="btn">View Details</a>
                    <i class="fas fa-heart"></i>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="property-card">
                  <img src="https://images.unsplash.com/photo-1560185893-a55cbc8c57e8?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Vlora Villa" />
                  <div class="card-body">
                    <h5>Vlora Coastal Villa</h5>
                    <p class="price">€780,000</p>
                    <p class="details">4 Beds • 3 Baths • 2200 sqft</p>
                    <a href="/property/vlora-villa" class="btn">View Details</a>
                    <i class="fas fa-heart"></i>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="property-card">
                  <img src="https://images.unsplash.com/photo-1600585154526-990dced4363d?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Saranda Apartment" />
                  <div class="card-body">
                    <span class="badge bg-info">Open House</span>
                    <h5>Saranda Seafront Apartment</h5>
                    <p class="price">€220,000</p>
                    <p class="details">2 Beds • 1 Bath • 900 sqft</p>
                    <a href="/property/saranda-apartment" class="btn">View Details</a>
                    <i class="fas fa-heart"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Add more carousel-items here if needed -->
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#propertyCarousel" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#propertyCarousel" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
    </div>
  </section>

  <!-- Map + Listings Combo Section -->
  <section class="map-listings-section" data-aos="fade-up" data-aos-delay="400">
    <div class="container-fluid">
      <h2 class="section-title text-center mb-5">Browse Properties Near You</h2>
      <div class="row">
        <div class="col-lg-6">
          <div id="map" class="mb-4"></div>
        </div>
        <div class="col-lg-6">
          <div class="property-list">
            <div class="property-item d-flex align-items-center p-3 mb-3 bg-white rounded-3 shadow-sm">
              <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=150&q=80" alt="Tirana Penthouse" class="rounded me-3" style="width: 120px; height: 80px; object-fit: cover;" />
              <div>
                <h6 class="mb-1">Tirana Skyline Penthouse</h6>
                <p class="price mb-1">€450,000</p>
                <small class="text-muted">3 Beds • 2 Baths</small>
              </div>
              <a href="/property/tirana-penthouse" class="btn btn-sm ms-auto">Details</a>
            </div>
            <div class="property-item d-flex align-items-center p-3 mb-3 bg-white rounded-3 shadow-sm">
              <img src="https://images.unsplash.com/photo-1560185893-a55cbc8c57e8?ixlib=rb-4.0.3&auto=format&fit=crop&w=150&q=80" alt="Vlora Villa" class="rounded me-3" style="width: 120px; height: 80px; object-fit: cover;" />
              <div>
                <h6 class="mb-1">Vlora Coastal Villa</h6>
                <p class="price mb-1">€780,000</p>
                <small class="text-muted">4 Beds • 3 Baths</small>
              </div>
              <a href="/property/vlora-villa" class="btn btn-sm ms-auto">Details</a>
            </div>
            <div class="property-item d-flex align-items-center p-3 mb-3 bg-white rounded-3 shadow-sm">
              <img src="https://images.unsplash.com/photo-1600585154526-990dced4363d?ixlib=rb-4.0.3&auto=format&fit=crop&w=150&q=80" alt="Saranda Apartment" class="rounded me-3" style="width: 120px; height: 80px; object-fit: cover;" />
              <div>
                <h6 class="mb-1">Saranda Seafront Apartment</h6>
                <p class="price mb-1">€220,000</p>
                <small class="text-muted">2 Beds • 1 Bath</small>
              </div>
              <a href="/property/saranda-apartment" class="btn btn-sm ms-auto">Details</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Call-to-Action Section -->
  <section class="cta-section" data-aos="fade-up" data-aos-delay="600">
    <div class="container">
      <h2 class="mb-4">Ready to Find Your Perfect Property?</h2>
      <p class="lead mb-5">Join thousands of buyers and renters discovering Albania’s best homes.</p>
      <a href="/properties" class="btn-alerts">Browse All Properties</a>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="row">
        <div class="col-md-4">
          <p>© 2025 Albania Properties. All Rights Reserved.</p>
        </div>
        <div class="col-md-4 text-center">
          <p>
            <a href="/about">About</a> |
            <a href="/contact">Contact</a> |
            <a href="/mortgage">Mortgage Tools</a> |
            <a href="/sell">Sell Your Home</a> |
            <a href="/market">Market Trends</a>
          </p>
        </div>
        <div class="col-md-4 text-end">
          <div class="social-icons">
            <a href="#"><i class="fab fa-facebook-f"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-tiktok"></i></a>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/typeahead.js/0.11.1/typeahead.bundle.min.js"></script>
  <script>
    // Initialize AOS animations
    AOS.init({ duration: 1000, once: true });

    // Sticky header
    window.addEventListener('scroll', () => {
      const header = document.querySelector('header');
      header.classList.toggle('scrolled', window.scrollY > 50);
    });

    // Check login status
    async function checkLoginStatus() {
      try {
        const response = await fetch('/whoami', { method: 'GET', credentials: 'include' });
        const data = await response.json();
        if (response.ok) {
          const user = data.user;
          const authLink = document.getElementById('auth-link');
          authLink.innerHTML = `
            <a class="nav-link" href="/dashboard/${user.user_type.replace('/', '-').toLowerCase()}"><i class="fas fa-user"></i> ${user.name}</a>
          `;
        } else {
          console.log('Not logged in:', data.message);
        }
      } catch (error) {
        console.error('Error checking login status:', error);
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      checkLoginStatus();
    });

    // Search form submissions
    document.getElementById('search-buy').addEventListener('submit', (e) => {
      e.preventDefault();
      const location = document.getElementById('location-buy').value;
      const type = document.querySelector('#search-buy [name="property-type-buy"]').value;
      const maxPrice = document.querySelector('#search-buy [name="max-price-buy"]').value;
      window.location.href = `/properties?purpose=buy&location=${encodeURIComponent(location)}&type=${type}&maxPrice=${maxPrice}`;
    });

    document.getElementById('search-rent').addEventListener('submit', (e) => {
      e.preventDefault();
      const location = document.getElementById('location-rent').value;
      const type = document.querySelector('#search-rent [name="property-type-rent"]').value;
      const maxRent = document.querySelector('#search-rent [name="max-rent"]').value;
      window.location.href = `/properties?purpose=rent&location=${encodeURIComponent(location)}&type=${type}&maxRent=${maxRent}`;
    });

    // Autocomplete for search inputs
    $(document).ready(function() {
      const locations = [
        "Berat", "Kučové", "Poliçan", "Ura Vajgurore", "Peshkopi", "Bulqizë", "Klos", "Burrel",
        "Durrës", "Krujë", "Shijak", "Manëz", "Elbasan", "Cërrik", "Librazhd", "Peqin",
        "Gramsh", "Belsh", "Fier", "Lushnjë", "Patos", "Ballsh", "Roskovec", "Gjirokastër",
        "Tepelenë", "Memaliaj", "Përmet", "Korçë", "Pogradec", "Maliq", "Bilisht", "Kukës",
        "Krumë", "Bajram Curri", "Lezhë", "Laç", "Rreshen", "Mamurras", "Shkodër", "Pukë",
        "Fushë-Arrëz", "Vau i Dejës", "Koplik", "Tirana", "Kamëz", "Vora", "Kavajë",
        "Rrogozhinë", "Vlorë", "Sarandë", "Himarë", "Delvinë", "Konispol", "Orikum", "Selenicë"
      ];
      const substringMatcher = function(strs) {
        return function findMatches(q, cb) {
          const matches = [];
          const substrRegex = new RegExp(q, 'i');
          strs.forEach(function(str) {
            if (substrRegex.test(str)) {
              matches.push(str);
            }
          });
          cb(matches);
        };
      };
      $('#location-buy, #location-rent').typeahead({
        hint: false,
        highlight: true,
        minLength: 1
      }, {
        name: 'locations',
        source: substringMatcher(locations),
        limit: 10
      });
    });

    // Favorite toggle
    document.querySelectorAll('.fa-heart').forEach(heart => {
      heart.addEventListener('click', () => {
        heart.classList.toggle('active');
      });
    });

    // Initialize Leaflet Map
    const map = L.map('map').setView([41.3275, 19.8187], 7);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(map);
    const markers = L.markerClusterGroup();
    markers.addLayer(L.marker([41.3275, 19.8187]).bindPopup('Tirana Penthouse - €450,000'));
    markers.addLayer(L.marker([40.6233, 20.7776]).bindPopup('Vlora Villa - €780,000'));
    markers.addLayer(L.marker([39.8760, 20.0050]).bindPopup('Saranda Apartment - €220,000'));
    map.addLayer(markers);
  </script>
</body>
</html>
