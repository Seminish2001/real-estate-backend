<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Find top real estate agents in Albania to help you buy, sell, or rent your dream property." />
  <meta name="keywords" content="real estate agents, Albania, find an agent, property experts" />
  <meta name="author" content="Albania Properties" />
  <title>Find an Agent | Albania Properties</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet" />
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet" />
  <!-- AOS Animation Library -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
  <!-- Custom CSS -->
  <style>
    :root {
      --primary-color: #1a73e8;
      --secondary-color: #2d3748;
      --accent-color: #00c4b4;
      --background-light: #f9fafb;
      --background-dark: #1f2a44;
      --text-dark: #1f2a44;
      --text-light: #fff;
      --shadow-sm: 0 2px 10px rgba(0, 0, 0, 0.08);
      --shadow-md: 0 6px 25px rgba(0, 0, 0, 0.12);
      --transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: var(--background-light);
      color: var(--text-dark);
      line-height: 1.6;
      overflow-x: hidden;
    }

    h1, h2, h3 {
      font-weight: 700;
    }

    a {
      text-decoration: none;
      color: inherit;
      transition: var(--transition);
    }

    /* Header */
    header {
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 1000;
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(12px);
      padding: 20px 0;
      box-shadow: var(--shadow-sm);
      transition: padding 0.3s ease, background 0.3s ease;
    }

    header.scrolled {
      padding: 10px 0;
      background: rgba(255, 255, 255, 1);
    }

    .navbar-brand {
      font-size: 1.8rem;
      color: var(--text-dark);
      display: flex;
      align-items: center;
      font-weight: 600;
    }

    .navbar-brand i {
      margin-right: 12px;
      color: var(--primary-color);
      font-size: 1.4rem;
    }

    .navbar-nav .nav-link {
      color: var(--text-dark);
      font-size: 1.1rem;
      font-weight: 400;
      margin-left: 30px;
      position: relative;
      padding-bottom: 6px;
    }

    .navbar-nav .nav-link:hover,
    .navbar-nav .nav-link.active {
      color: var(--primary-color);
    }

    .navbar-nav .nav-link::after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      background: var(--primary-color);
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      transition: width 0.3s ease;
    }

    .navbar-nav .nav-link:hover::after,
    .navbar-nav .nav-link.active::after {
      width: 80%;
    }

    /* Agents Section */
    .agents-section {
      padding: 150px 0 80px;
      background: var(--background-light);
    }

    .section-title {
      font-size: 2.5rem;
      color: var(--text-dark);
      text-align: center;
      margin-bottom: 40px;
      position: relative;
    }

    .section-title::after {
      content: '';
      width: 60px;
      height: 4px;
      background: var(--accent-color);
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
    }

    .agent-search-bar {
      background: #fff;
      border-radius: 12px;
      padding: 20px;
      box-shadow: var(--shadow-sm);
      max-width: 800px;
      margin: 0 auto 40px;
    }

    .agent-search-bar form {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .agent-search-bar input,
    .agent-search-bar select {
      flex: 1;
      padding: 12px;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      font-size: 1rem;
    }

    .agent-search-bar button {
      background: var(--primary-color);
      color: var(--text-light);
      border: none;
      padding: 12px 30px;
      border-radius: 8px;
      font-weight: 600;
      transition: var(--transition);
    }

    .agent-search-bar button:hover {
      background: #1557b0;
    }

    .agent-card {
      background: #fff;
      border-radius: 12px;
      box-shadow: var(--shadow-sm);
      padding: 20px;
      transition: var(--transition);
      position: relative;
    }

    .agent-card:hover {
      transform: translateY(-10px);
      box-shadow: var(--shadow-md);
    }

    .agent-card img {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      margin-right: 20px;
    }

    .agent-card h3 {
      font-size: 1.5rem;
      color: var(--text-dark);
      margin-bottom: 0;
    }

    .agent-card .agency {
      font-size: 1rem;
      color: var(--primary-color);
      font-weight: 600;
      margin-bottom: 5px;
    }

    .agent-card .sales {
      font-size: 0.9rem;
      color: #718096;
      margin-bottom: 10px;
    }

    .agent-card .rating {
      color: #f1c40f;
      margin-bottom: 10px;
    }

    .agent-card .details {
      font-size: 0.95rem;
      color: #718096;
      margin-bottom: 10px;
    }

    .agent-card .btn {
      background: var(--primary-color);
      color: var(--text-light);
      border: none;
      border-radius: 8px;
      padding: 10px 25px;
      font-weight: 600;
      transition: var(--transition);
    }

    .agent-card .btn:hover {
      background: #1557b0;
      transform: scale(1.05);
    }

    /* Footer */
    .footer {
      background: var(--background-dark);
      color: var(--text-light);
      padding: 80px 0 30px;
      font-size: 1rem;
    }

    .footer a {
      color: #a0aec0;
      margin: 0 20px;
      transition: var(--transition);
    }

    .footer a:hover {
      color: var(--primary-color);
    }

    .social-icons a {
      font-size: 1.5rem;
      margin: 0 15px;
      color: #a0aec0;
    }

    .social-icons a:hover {
      color: var(--accent-color);
    }

    /* Animations */
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    [data-aos="fade-up"] {
      animation: fadeInUp 0.8s ease-out forwards;
    }

    /* Typeahead Styles */
    .tt-menu {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
      border: 1px solid #e2e8f0;
      max-height: 300px;
      overflow-y: auto;
      z-index: 1000;
      margin-top: 5px;
    }

    .tt-suggestion {
      padding: 10px 20px;
      font-size: 1rem;
      color: var(--text-dark);
      cursor: pointer;
      transition: background 0.2s ease;
    }

    .tt-suggestion:hover,
    .tt-suggestion.tt-cursor {
      background: #f1f5f9;
    }

    .tt-highlight {
      color: var(--primary-color);
      font-weight: 600;
    }

    .tt-empty {
      padding: 10px 20px;
      font-size: 1rem;
      color: #718096;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <nav class="navbar navbar-expand-lg">
      <div class="container">
        <a class="navbar-brand" href="/"><i class="fas fa-home"></i> Albania Properties</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item"><a class="nav-link" href="/properties?purpose=buy">Buy</a></li>
            <li class="nav-item"><a class="nav-link" href="/properties?purpose=rent">Rent</a></li>
            <li class="nav-item"><a class="nav-link" href="/sell">Sell</a></li>
            <li class="nav-item"><a class="nav-link" href="/market">Market Insights</a></li>
            <li class="nav-item"><a class="nav-link active" href="/agents">Find an Agent</a></li>
            <li class="nav-item" id="auth-link">
              <a class="nav-link" href="/signin"><i class="fas fa-user"></i> Sign In</a>
            </li>
            <li class="nav-item"><a class="nav-link" href="/favorites"><i class="fas fa-heart"></i></a></li>
          </ul>
        </div>
      </div>
    </nav>
  </header>

  <!-- Agents Section -->
  <section class="agents-section">
    <div class="container">
      <h2 class="section-title" data-aos="fade-up">Find Your Perfect Agent</h2>
      <div class="agent-search-bar" data-aos="fade-up" data-aos-delay="200">
        <form id="agent-search-form">
          <input type="text" id="location" placeholder="Enter city or region" required />
          <select name="specialty">
            <option value="">All Specialties</option>
            <option value="buying">Buying</option>
            <option value="selling">Selling</option>
            <option value="renting">Renting</option>
            <option value="luxury">Luxury Homes</option>
          </select>
          <button type="submit"><i class="fas fa-search"></i> Search Agents</button>
        </form>
      </div>
      <div class="row g-4" id="agent-list">
        <!-- Agent Card Example 1 -->
        <div class="col-md-4" data-aos="fade-up" data-aos-delay="400">
          <div class="agent-card d-flex align-items-center">
            <img src="https://randomuser.me/api/portraits/women/1.jpg" alt="Agent Ana Kovaçi" />
            <div>
              <h3>Ana Kovaçi</h3>
              <p class="agency">Elite Properties Albania</p>
              <p class="sales">32 Sales</p>
              <div class="rating">
                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i>
                <span>(4.8 - 25 Reviews)</span>
              </div>
              <p class="details">Specialty: Luxury Homes • Tirana</p>
              <a href="/agent/ana-kovaci" class="btn">Contact Agent</a>
            </div>
          </div>
        </div>
        <!-- Agent Card Example 2 -->
        <div class="col-md-4" data-aos="fade-up" data-aos-delay="600">
          <div class="agent-card d-flex align-items-center">
            <img src="https://randomuser.me/api/portraits/men/2.jpg" alt="Agent Besnik Rama" />
            <div>
              <h3>Besnik Rama</h3>
              <p class="agency">Coastal Realty Group</p>
              <p class="sales">45 Sales</p>
              <div class="rating">
                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                <span>(5.0 - 18 Reviews)</span>
              </div>
              <p class="details">Specialty: Buying • Durrës</p>
              <a href="/agent/besnik-rama" class="btn">Contact Agent</a>
            </div>
          </div>
        </div>
        <!-- Agent Card Example 3 -->
        <div class="col-md-4" data-aos="fade-up" data-aos-delay="800">
          <div class="agent-card d-flex align-items-center">
            <img src="https://randomuser.me/api/portraits/women/3.jpg" alt="Agent Elira Deda" />
            <div>
              <h3>Elira Deda</h3>
              <p class="agency">South Shore Realty</p>
              <p class="sales">19 Sales</p>
              <div class="rating">
                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i>
                <span>(4.2 - 15 Reviews)</span>
              </div>
              <p class="details">Specialty: Renting • Vlorë</p>
              <a href="/agent/elira-deda" class="btn">Contact Agent</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="row">
        <div class="col-md-4">
          <p>© 2025 Albania Properties. All Rights Reserved.</p>
        </div>
        <div class="col-md-4 text-center">
          <p>
            <a href="/about">About</a> |
            <a href="/contact">Contact</a> |
            <a href="/mortgage">Mortgage Tools</a> |
            <a href="/sell">Sell Your Home</a> |
            <a href="/market">Market Trends</a>
          </p>
        </div>
        <div class="col-md-4 text-end">
          <div class="social-icons">
            <a href="#"><i class="fab fa-facebook-f"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-linkedin-in"></i></a>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/typeahead.js/0.11.1/typeahead.bundle.min.js"></script>
  <script>
    // Initialize AOS animations
    AOS.init({ duration: 1000, once: true });

    // Sticky header
    window.addEventListener('scroll', () => {
      const header = document.querySelector('header');
      header.classList.toggle('scrolled', window.scrollY > 50);
    });

    // Check login status
    async function checkLoginStatus() {
      try {
        const response = await fetch('/whoami', { method: 'GET', credentials: 'include' });
        const data = await response.json();
        if (response.ok) {
          const user = data.user;
          const authLink = document.getElementById('auth-link');
          authLink.innerHTML = `
            <a class="nav-link" href="/dashboard/${user.user_type.replace('/', '-').toLowerCase()}"><i class="fas fa-user"></i> ${user.name}</a>
          `;
        } else {
          console.log('Not logged in:', data.message);
        }
      } catch (error) {
        console.error('Error checking login status:', error);
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      checkLoginStatus();
    });

    // Agent search form submission (placeholder)
    document.getElementById('agent-search-form').addEventListener('submit', (e) => {
      e.preventDefault();
      const location = document.getElementById('location').value;
      const specialty = document.querySelector('#agent-search-form [name="specialty"]').value;
      console.log(`Searching for agents in ${location} with specialty: ${specialty}`);
      // Add logic here to filter agents dynamically (e.g., fetch from an API)
    });

    // Autocomplete for location search
    $(document).ready(function() {
      const locations = [
        "Berat", "Kučové", "Poliçan", "Ura Vajgurore", "Peshkopi", "Bulqizë", "Klos", "Burrel",
        "Durrës", "Krujë", "Shijak", "Manëz", "Elbasan", "Cërrik", "Librazhd", "Peqin",
        "Gramsh", "Belsh", "Fier", "Lushnjë", "Patos", "Ballsh", "Roskovec", "Gjirokastër",
        "Tepelenë", "Memaliaj", "Përmet", "Korçë", "Pogradec", "Maliq", "Bilisht", "Kukës",
        "Krumë", "Bajram Curri", "Lezhë", "Laç", "Rreshen", "Mamurras", "Shkodër", "Pukë",
        "Fushë-Arrëz", "Vau i Dejës", "Koplik", "Tirana", "Kamëz", "Vora", "Kavajë",
        "Rrogozhinë", "Vlorë", "Sarandë", "Himarë", "Delvinë", "Konispol", "Orikum", "Selenicë"
      ];
      const substringMatcher = function(strs) {
        return function findMatches(q, cb) {
          const matches = [];
          const substrRegex = new RegExp(q, 'i');
          strs.forEach(function(str) {
            if (substrRegex.test(str)) {
              matches.push(str);
            }
          });
          cb(matches);
        };
      };
      $('#location').typeahead({
        hint: false,
        highlight: true,
        minLength: 1
      }, {
        name: 'locations',
        source: substringMatcher(locations),
        limit: 10
      });
    });
  </script>
</body>
</html>
